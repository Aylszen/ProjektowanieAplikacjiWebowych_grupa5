<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Trelo</title>
   <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.9/angular.min.js"></script>
   <link rel="stylesheet" href="../css/index.css">
</head>
<body ng-app="myApp" ng-controller="todoCtrl">

     <form ng-submit="AddTable()">
        <input type="type" name="" ng-model="InputAdd" placeholder="Add New Table">
        <input type="submit" name="Add New Table" value="Add table">
        {{tableList}}
    </form>
    <div ng-repeat="y in tableList">
    
        <h2>{{y.tableText}}</h2>
     
        <form ng-submit="AddTicket(y,text)">
         <input type="type" name="" ng-model="text"  placeholder="Add New">
          <input type="submit" name="Add New" value="Add item"> 
        </form>
         <br>
    
        <div ng-repeat="x in y.ticket">
        <input type="checkbox" ng-model="x.done"> <span ng-bind="x.text"></span> 
      
      
    </div>
</div>
 
    <p><button ng-click="remove()">Remove</button></p>


 
<script type="text/javascript">
    var app = angular.module("myApp", []);
    app.controller("todoCtrl", function($scope){
         $scope.todoList = [{todoText: "First item", done: false}, {todoText: "second item", done: false}];
         $scope.tableList = [
            {tableText: "todo",
                ticket: [
                    {text: "first", done: false},
                    {text: "second", done: false}
                        ] 
            },
            {tableText: "inprogress",
                ticket:[
                    {text: "third", done: false}
                        ]    
            },
            {tableText: "Done",
                ticket:[]
            }]

        
        $scope.AddTicket = function(tT,text){
            tT.ticket.push({text: this.text, done: false});
          //  $scope.tableList[{tableText: mm}].push({ticket:[{text:  $scope.todoInput, done: false}]});
            this.text = "";

        }
        $scope.remove = function(){
            var oldList = $scope.tableList;
            $scope.tableList = [];
            angular.forEach(oldList, function(x){
                if(!x.done) $scope.tableList.push(x);
            })
        }
        $scope.AddTable = function(){
            $scope.tableList.push({tableText: $scope.InputAdd, ticket:  [{text: "lol"}]});
            $scope.InputAdd="";
        }
        $scope.annoy = function(){
            alert("annoy!")
        }
    });
    </script>
</body>
</html>